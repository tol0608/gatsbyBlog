{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/topbutton230907/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p>깃허브 블로그를 구현하던 중. 다른 블로그나 페이지에서 흔하게 볼 수 있는 ‘탑버튼’을 구현해보기로 했습니다.</p>\n<p>저는 기존에 다른 홈페이지를 클론코딩하면서 구현해 놓은 자바스크립트, 제이쿼리 코드를 가지고 있었습니다.</p>\n<h3 id=\"1-기존의-코드-jQuery\" style=\"position:relative;\">1. 기존의 코드 (jQuery)<a href=\"#1-%EA%B8%B0%EC%A1%B4%EC%9D%98-%EC%BD%94%EB%93%9C-jQuery\" aria-label=\"1 기존의 코드 jQuery permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">$</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ready</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// main2에 내려가기전까지 버튼 숨기기</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.t-btn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">hide</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 스크롤 이벤트 감지</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">scroll</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// main2의 위치를 확인하여 버튼 보이기/숨기기</span>\n        <span class=\"token keyword\">var</span> section2Offset <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.main2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">offset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>top<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">$</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">scrollTop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> section2Offset<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.t-btn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fadeIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.t-btn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fadeOut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 버튼 클릭 시 상단으로 스크롤</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.t-btn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'html, body'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">scrollTop</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'slow'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>기존의 코드를 가볍게 살펴보면, 스크롤 이벤트를 사용하여 페이지의 스크롤 위치를 감지하고, 특정섹션(main2 클래스)에 도달하면 버튼을 표시하고 버튼을 클릭하면 페이지 상단으로 스크롤액션하고 있습니다.</p>\n<p>현재 제 블로그에서는 Gatsby JS와 TypeScript를 사용하기에 손봐야할 부분이 조금 있습니다.</p>\n<h3 id=\"2-1차-수정-코드-typescript\" style=\"position:relative;\">2. 1차 수정 코드 (typescript)<a href=\"#2-1%EC%B0%A8-%EC%88%98%EC%A0%95-%EC%BD%94%EB%93%9C-typescript\" aria-label=\"2 1차 수정 코드 typescript permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DOMContentLoaded\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// main2에 내려가기전까지 버튼 숨기기</span>\n  <span class=\"token keyword\">const</span> tBtn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.t-btn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tBtn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    tBtn<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 스크롤 이벤트 감지</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"scroll\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// main2의 위치를 확인하여 버튼 보이기/숨기기</span>\n    <span class=\"token keyword\">const</span> main2 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.main2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>main2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> section2Offset <span class=\"token operator\">=</span> main2<span class=\"token punctuation\">.</span><span class=\"token function\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>top<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">></span> section2Offset<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tBtn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          tBtn<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'block'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tBtn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          tBtn<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 버튼 클릭 시 상단으로 스크롤</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tBtn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    tBtn<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> top<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> behavior<span class=\"token operator\">:</span> <span class=\"token string\">'smooth'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>기존의 기능과 동일하게 그대로 Typescript형식으로만 바꾸었습니다. 여기서 추가적으로 작업이 필요합니다.</p>\n<ol>\n<li>main2 클래스와 연결된 스크롤 이벤트를 scrollY 를 이용한 스크롤 이벤트로 수정</li>\n<li>여러 querySeletor를 제거하고 함수형 컴포넌트로 변환</li>\n</ol>\n<p>크게 보면 두 가지인데, 제가 실제로 거쳐간 과정은 조금 복잡했습니다.</p>\n<h3 id=\"3-2차-수정-코드\" style=\"position:relative;\">3. 2차 수정 코드<a href=\"#3-2%EC%B0%A8-%EC%88%98%EC%A0%95-%EC%BD%94%EB%93%9C\" aria-label=\"3 2차 수정 코드 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 스크롤 이벤트 감지하여 버튼 보이기/숨기기</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleScroll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> tBtn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.tBtn'</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tBtn <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">HTMLElement</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>scrollY\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>scrollPosition <span class=\"token operator\">></span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      tBtn<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'block'</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      tBtn<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 버튼 클릭 시 상단으로 스크롤</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">scrollToTop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> tBtn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.t-btn'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tBtn<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n\n  tBtn<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">behavior</span><span class=\"token operator\">:</span> <span class=\"token string\">'smooth'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 페이지 로드 시 초기화 및 이벤트 리스너 등록</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'DOMContentLoaded'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">handleScroll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">scrollToTop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// 스크롤 이벤트 리스너 등록</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>처음에는 ESLint 오류가 떴었습니다. tBtn이 ‘any’타입으로  간주되어 display와 같은 속성에 대한 안전하지 않은 멤버 액세스를 수행하고 있다고 오류가 발생했습니다. 그래서 tBtn을 HTMLElement 또는 null로 캐스팅하여 타입 안정성을 확보하는게 필요했습니다.</p>\n<p>그럼에도 불구하고 지속적으로 멤버 액세스 오류가 발생하여  querySelector로 찾은 요소가 실제로 HTMLElement임을 Typescript에 알려주어야했습니다. 이를 위해서 <code class=\"language-text\">if (tBtn instanceof HTMLElement){}</code> 를 통해 오류를 해결했습니다.</p>\n<h3 id=\"4-함수형-컴포넌트\" style=\"position:relative;\">4. 함수형 컴포넌트<a href=\"#4-%ED%95%A8%EC%88%98%ED%98%95-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8\" aria-label=\"4 함수형 컴포넌트 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">TopButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isVisible<span class=\"token punctuation\">,</span> setIsVisible<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 스크롤 이벤트 핸들러</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">handleScroll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>scrollY<span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setIsVisible</span><span class=\"token punctuation\">(</span>scrollPosition <span class=\"token operator\">></span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 스크롤 이벤트 리스너 등록</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 컴포넌트가 마운트 되었을 때 초기 스크롤 위치에 따라 버튼 보이기/숨기기 설정</span>\n    <span class=\"token function\">handleScroll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 컴포넌트 언마운트 시 스크롤 이벤트 리스너 제거</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n      <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>t-btn<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> display<span class=\"token operator\">:</span> isVisible <span class=\"token operator\">?</span> <span class=\"token string\">'block'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'none'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> top<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> behavior<span class=\"token operator\">:</span> <span class=\"token string\">'smooth'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      Top\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> TopButton<span class=\"token punctuation\">;</span></code></pre></div>\n<p>TopButton 을 함수형 컴포넌트로 변환했습니다. 코드를 한 번 리뷰해보자면,</p>\n<ol>\n<li><code class=\"language-text\">import React, {useEffect} from ‘react’</code> 에서 React와 useEffect를 임포트 했습니다. 함수형 컴포넌트에서 데이터를 가져오거나 이벤트 리스너 등을 추가할때 필요한 구문입니다.</li>\n<li><code class=\"language-text\">funtion TopButton(){}</code> 함수 컴포넌트를 정의했습니다.</li>\n<li><code class=\"language-text\">useEffect(() ⇒ {…}, [])</code> useEffect 훅을 사용하여 컴포넌트가 마운트될때 실행할 함수를 정의 했습니다. 빈배열을 추가하여 의존성을 대응했습니다. 그래서 배열에 포함된 변수가 변경될 때만 함수가 실행되도록 했습니다.</li>\n<li><code class=\"language-text\">funtion handleScroll() {}</code> 스크롤 이벤트를 처리하는 함수입니다.</li>\n<li><code class=\"language-text\">funtion scrollToTop() {}</code> 페이지 상단으로 스크롤하는 버튼 클릭 이벤트를 처리하는 함수입니다.</li>\n</ol>\n<p>간략하게 위와 같은 코드를 통해 Top Button을 구현했습니다. 이제 버튼을 클릭하면 페이지의 상단으로 스크롤 하는 코드가 만들어졌습니다.</p>\n<p>이제 스타일만 입혀주면 제가 고민한것은 끝이납니다.</p>\n<h3 id=\"5-스타일-객체를-생성\" style=\"position:relative;\">5. 스타일 객체를 생성<a href=\"#5-%EC%8A%A4%ED%83%80%EC%9D%BC-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EC%83%9D%EC%84%B1\" aria-label=\"5 스타일 객체를 생성 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">'../styles/themeMode.css'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">TopButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isVisible<span class=\"token punctuation\">,</span> setIsVisible<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 스크롤 이벤트 핸들러</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">handleScroll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> scrollPosition <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>scrollY\n      <span class=\"token function\">setIsVisible</span><span class=\"token punctuation\">(</span>scrollPosition <span class=\"token operator\">></span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 스크롤 이벤트 리스너 등록</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// 컴포넌트가 마운트 되었을 때 초기 스크롤 위치에 따라 버튼 보이기/숨기기 설정</span>\n    <span class=\"token function\">handleScroll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// 컴포넌트 언마운트 시 스크롤 이벤트 리스너 제거</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// 스타일 객체를 생성하는 함수</span>\n  <span class=\"token keyword\">const</span> buttonStyle<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>CSSProperties <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    position<span class=\"token operator\">:</span> <span class=\"token string\">'fixed'</span><span class=\"token punctuation\">,</span>\n    bottom<span class=\"token operator\">:</span> <span class=\"token string\">'110px'</span><span class=\"token punctuation\">,</span>\n    right<span class=\"token operator\">:</span> <span class=\"token string\">'25px'</span><span class=\"token punctuation\">,</span>\n    border<span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\n    borderRadius<span class=\"token operator\">:</span> <span class=\"token string\">'50%'</span><span class=\"token punctuation\">,</span>\n    width<span class=\"token operator\">:</span> <span class=\"token string\">'50px'</span><span class=\"token punctuation\">,</span>\n    height<span class=\"token operator\">:</span> <span class=\"token string\">'50px'</span><span class=\"token punctuation\">,</span>\n    fontSize<span class=\"token operator\">:</span> <span class=\"token string\">'24px'</span><span class=\"token punctuation\">,</span>\n    cursor<span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\n    display<span class=\"token operator\">:</span> isVisible <span class=\"token operator\">?</span> <span class=\"token string\">'block'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// isVisible 상태에 따라 동적으로 설정</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n      <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>buttonStyle<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tBtn<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> top<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> behavior<span class=\"token operator\">:</span> <span class=\"token string\">'smooth'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      👆\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> TopButton</code></pre></div>\n<p>css파일을 따로 만들수도 있었지만, 기존에 다른 기능들도 상당부분 함수를 사용하여 컴포넌트 스타일을 동적으로 설정해왔었습니다. 통일성을 위해서 컴포넌트 스타일 함수를 생성했습니다.</p>\n<p>추후 리팩토링을 하면서 CSS를 한번에 뺄지는 다시한 번 고민해보겠습니다.</p>\n<p>이렇게 해서 TopButton.tsx 컴포넌트는 완성되었습니다. 아직 익숙하지 않은 Typescript라 과정도 매끄럽지 않고 여정이 길었지만 기존의 QuerrySelector 와 스크롤 이벤트를 함수형 컴포넌트로 수정해볼 수 있는 경험을 가질수있어서 뿌듯했습니다.</p>","tableOfContents":"<ul>\n<li><a href=\"#1-%EA%B8%B0%EC%A1%B4%EC%9D%98-%EC%BD%94%EB%93%9C-jquery\">1. 기존의 코드 (jQuery)</a></li>\n<li><a href=\"#2-1%EC%B0%A8-%EC%88%98%EC%A0%95-%EC%BD%94%EB%93%9C-typescript\">2. 1차 수정 코드 (typescript)</a></li>\n<li><a href=\"#3-2%EC%B0%A8-%EC%88%98%EC%A0%95-%EC%BD%94%EB%93%9C\">3. 2차 수정 코드</a></li>\n<li><a href=\"#4-%ED%95%A8%EC%88%98%ED%98%95-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8\">4. 함수형 컴포넌트</a></li>\n<li><a href=\"#5-%EC%8A%A4%ED%83%80%EC%9D%BC-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EC%83%9D%EC%84%B1\">5. 스타일 객체를 생성</a></li>\n</ul>","frontmatter":{"title":"TopButton 구현","summary":"제이쿼리 코드를 타입스크립트의 함수형 컴포넌트로!","date":"2023.09.07.","categories":["블로그"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIHCf/EABYBAQEBAAAAAAAAAAAAAAAAAAMHCP/aAAwDAQACEAMQAAABytqMnXQEYcA3/8QAGhABAAIDAQAAAAAAAAAAAAAAAgMEBQYQEv/aAAgBAQABBQKMOV7LVwdcc9Jc/8QAGxEAAwADAQEAAAAAAAAAAAAAAQIDBBESEwD/2gAIAQMBAT8BfHWloZBrkK2N68ynYpj19lVSciQGrGfO5dHSFmYDrRH3/8QAHBEAAwEAAgMAAAAAAAAAAAAAAQIDERIhABMi/9oACAECAQE/AVsyTrIJIi3DXaYaqesk5Kh7mG3749tgBOaD5//EACQQAAIBAgUEAwAAAAAAAAAAAAECAwQhBRAREkEAExUjMTIz/9oACAEBAAY/AkjjRpJJGCoiAs7sfhVUXJPAFzx1h/h0rUl2SDFIqujqabsT7YDCqNP+iv79NAGAQbvsM7sTzck3y//EABsQAQADAQADAAAAAAAAAAAAAAERITEAEFFh/9oACAEBAAE/IVrB1BgK54lKE85s5xtAeMb3gtXSljCWJolifRziw2kmY9mVltvfH//aAAwDAQACAAMAAAAQeA//xAAWEQEBAQAAAAAAAAAAAAAAAAABIRD/2gAIAQMBAT8QNwhgQIwKswrB/8QAFxEBAQEBAAAAAAAAAAAAAAAAAREQIf/aAAgBAgEBPxCxTsvlQVTzBzlf/8QAGRABAQEBAQEAAAAAAAAAAAAAASERABBB/9oACAEBAAE/EBfcfWrQ1UghB2/6hiEBHzpdT4QrKQSgBiAFCIgjpzlSkjNZn1G02vn/2Q=="},"images":{"fallback":{"src":"/static/b20a6770925ef3028fc75f4df6731773/3786c/typescript.jpg","srcSet":"/static/b20a6770925ef3028fc75f4df6731773/7af2f/typescript.jpg 300w,\n/static/b20a6770925ef3028fc75f4df6731773/d2052/typescript.jpg 600w,\n/static/b20a6770925ef3028fc75f4df6731773/3786c/typescript.jpg 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/b20a6770925ef3028fc75f4df6731773/da700/typescript.webp 300w,\n/static/b20a6770925ef3028fc75f4df6731773/cef4d/typescript.webp 600w,\n/static/b20a6770925ef3028fc75f4df6731773/e8d72/typescript.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":628}},"publicURL":"/static/b20a6770925ef3028fc75f4df6731773/typescript.jpeg"}}}}]}},"pageContext":{"slug":"/blog/topbutton230907/"}},"staticQueryHashes":[],"slicesMap":{}}